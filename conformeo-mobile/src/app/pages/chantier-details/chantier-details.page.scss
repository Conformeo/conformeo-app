// Fond de page
.detail-content {
  --background: #f7f8fa;
}

// 1. Bouton retour flottant (Style "Bulle")
.back-btn-container {
  position: absolute;
  top: 50px;
  left: 20px;
  z-index: 100;
  background: rgba(0,0,0,0.3);
  backdrop-filter: blur(5px);
  border-radius: 50%;
  width: 40px; height: 40px;
  display: flex; align-items: center; justify-content: center;
}

// 2. En-tête Image (NOUVEAU STYLE avec IMG)
.header-image-container {
  height: 250px;
  width: 100%;
  position: relative;
  background: #eee;
  overflow: hidden;

  .cover-img {
    width: 100%;
    height: 100%;
    object-fit: cover; /* Remplit le cadre sans déformer */
    display: block;
  }
  
  .header-overlay {
    position: absolute; bottom: 0; left: 0; width: 100%; height: 100%;
    background: linear-gradient(to bottom, transparent 40%, rgba(0,0,0,0.8));
    display: flex; align-items: flex-end;
    padding: 20px; padding-bottom: 50px; // Espace pour l'arrondi
    z-index: 2;
  }

  .header-text {
    color: white; width: 100%;
    .chantier-title { margin: 0; font-size: 26px; font-weight: 800; text-shadow: 0 2px 4px rgba(0,0,0,0.3); line-height: 1.2; }
    .chantier-subtitle { margin: 5px 0 0; font-size: 14px; opacity: 0.9; font-weight: 500; }
  }
}

// 3. Corps de page (Arrondi)
.body-container {
  margin-top: -30px; // Remonte sur l'image
  border-top-left-radius: 30px;
  border-top-right-radius: 30px;
  background: #f7f8fa;
  min-height: 500px;
  position: relative;
  z-index: 10;
  padding: 20px;
}

// 4. Carte d'Infos (Fiche Identité)
.info-card {
  background: white; border-radius: 16px; padding: 20px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.05); margin-bottom: 25px;

  // Adresse
  .location-row {
    display: flex; align-items: center; gap: 10px; margin-bottom: 20px;
    font-size: 14px; color: #555; font-weight: 500;
  }

  // Grille Dates & Statut (AJOUTÉ)
  .info-grid {
    display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px;
    margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid #f0f0f0;
    
    .grid-item {
      label { display: block; font-size: 11px; color: #999; margin-bottom: 4px; text-transform: uppercase; letter-spacing: 0.5px; }
      p { margin: 0; font-size: 13px; font-weight: 700; color: #333; }
    }
  }

  // Boutons Actions
  .actions-row {
    display: flex; justify-content: space-around; flex-wrap: wrap; gap: 15px;
    
    .action-btn {
      display: flex; flex-direction: column; align-items: center; gap: 8px; cursor: pointer;
      
      .icon-circle {
        width: 45px; height: 45px; background: #f4f6f9; border-radius: 50%;
        display: flex; align-items: center; justify-content: center;
        color: var(--ion-color-primary); font-size: 20px; transition: transform 0.1s;
      }
      span { font-size: 11px; color: #666; font-weight: 600; }
      
      &:active .icon-circle { transform: scale(0.9); background: #e0e0e0; }
    }
  }
}

// 5. Titres Sections
.section-title {
  font-weight: 800; font-size: 18px; margin-bottom: 15px; color: #333; margin-left: 5px;
}

// 6. Journal de Bord (Feed)
.feed-card {
  background: white; border-radius: 16px; overflow: hidden; margin-bottom: 15px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.03); display: flex; padding: 12px; gap: 15px;
  transition: transform 0.1s;
  
  &:active { transform: scale(0.98); }

  .feed-image {
    width: 80px; height: 80px; border-radius: 10px;
    background-size: cover; background-position: center; background-color: #eee;
    flex-shrink: 0;
  }

  .feed-content {
    flex-grow: 1; overflow: hidden;
    
    .feed-header {
      display: flex; justify-content: space-between; margin-bottom: 5px; font-size: 12px;
      .feed-date { color: #999; }
      .feed-badge { 
        font-weight: 700; text-transform: uppercase; font-size: 10px;
        &.Faible { color: #2dd36f; }
        &.Moyen { color: #ffc409; }
        &.Critique { color: #eb445a; }
      }
    }

    .feed-title { margin: 0 0 4px; font-size: 15px; font-weight: 700; color: #333; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .feed-desc { 
      margin: 0; font-size: 13px; color: #666; 
      display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; 
    }
  }
}

.empty-state { text-align: center; color: #999; margin-top: 30px; font-style: italic; }

// 7. Cacher sur Desktop (Largeur > 1200px)
@media (min-width: 1200px) {
  .mobile-only-action {
    display: none !important;
  }
}

/* ... votre CSS existant ... */

.section-title h3 {
  font-size: 18px;
  font-weight: 700;
  color: #1e293b;
  margin: 10px 0;
  padding-left: 5px;
  border-left: 4px solid #3b82f6;
  line-height: 1.2;
}

/* Défilement horizontal pour le matériel */
.horizontal-scroll {
  display: flex;
  overflow-x: auto;
  gap: 15px;
  padding: 10px 5px;
  
  /* Masquer la barre de scroll tout en permettant le scroll */
  -webkit-overflow-scrolling: touch;
  &::-webkit-scrollbar { display: none; }
}

.materiel-card {
  min-width: 140px;
  background: white;
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  overflow: hidden;
  flex-shrink: 0;

  .mat-img {
    height: 90px;
    background: #f1f5f9;
    img { width: 100%; height: 100%; object-fit: cover; }
  }

  .mat-info {
    padding: 8px;
    h4 { margin: 0; font-size: 14px; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    p { margin: 2px 0 5px; font-size: 12px; color: #64748b; }
  }
}

.empty-state-small {
  text-align: center;
  padding: 20px;
  background: #f8fafc;
  border-radius: 12px;
  border: 1px dashed #cbd5e1;
  color: #94a3b8;
  
  ion-icon { font-size: 24px; margin-bottom: 5px; }
  p { margin: 0; font-size: 13px; }
}

.divider {
  height: 1px;
  background: #e2e8f0;
  margin: 20px 0;
}

/* ... votre css existant ... */

/* Zone de défilement horizontal */
.horizontal-scroll {
  display: flex;
  overflow-x: auto;
  gap: 12px; /* Espace entre les cartes */
  padding: 5px 5px 15px 5px; /* Un peu d'espace pour l'ombre */
  
  /* Scroll fluide et masquage de la barre */
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;
  &::-webkit-scrollbar { display: none; }
}

/* La carte équipement (Vignette) */
.materiel-card {
  width: 120px;       /* Largeur Fixe */
  min-width: 120px;   /* Empêche l'écrasement */
  background: white;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.08); /* Belle ombre */
  overflow: hidden;
  flex-shrink: 0;     /* Reste rigide */
  display: flex;
  flex-direction: column;

  .mat-img-container {
    height: 80px;
    background: #f8fafc;
    width: 100%;
    
    img { 
      width: 100%; 
      height: 100%; 
      object-fit: cover; 
    }
  }

  .mat-info {
    padding: 8px;
    
    h4 { 
      margin: 0; 
      font-size: 12px; /* Texte plus petit */
      font-weight: 600; 
      color: #1e293b;
      white-space: nowrap; 
      overflow: hidden; 
      text-overflow: ellipsis; 
    }
    
    p { 
      margin: 2px 0 6px; 
      font-size: 10px; 
      color: #64748b; 
    }

    ion-badge {
      font-size: 9px;
      padding: 3px 6px;
    }
  }
}
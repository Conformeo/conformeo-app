<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Mon Équipe</ion-title>
    
    <ion-buttons slot="end">
      <ion-badge color="light" style="margin-right: 10px; color: var(--ion-color-primary);">
        {{ users.length }}
      </ion-badge>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="bg-light">

  <div *ngIf="users.length === 0" class="ion-text-center ion-padding" style="margin-top: 50px;">
    <ion-icon name="person" size="large" color="medium"></ion-icon>
    <p class="ion-text-muted">Aucun membre dans l'équipe.</p>
  </div>

  <ion-list class="team-list">
    <ion-item *ngFor="let u of users" lines="full">
      
      <ion-avatar slot="start" [style.background]="u.role === 'admin' ? '#ffc409' : '#3880ff'">
        <span class="initials">{{ getInitials(u.email) }}</span>
      </ion-avatar>

      <ion-label>
        <h2>
          {{ u.email }}
          <span *ngIf="u.email === currentUserEmail" style="font-size: 12px; color: #888;">(Vous)</span>
        </h2>
        <p>{{ u.role === 'admin' ? 'Administrateur / Gérant' : 'Conducteur de Travaux' }}</p>
      </ion-label>

      <ion-icon 
        slot="end" 
        [name]="u.role === 'admin' ? 'shield-checkmark' : 'person'" 
        [color]="u.role === 'admin' ? 'warning' : 'primary'">
      </ion-icon>

    </ion-item>
  </ion-list>

  <ion-fab vertical="bottom" horizontal="end" slot="fixed">
    <ion-fab-button (click)="addUser()">
      <ion-icon name="add"></ion-icon>
    </ion-fab-button>
  </ion-fab>

</ion-content>